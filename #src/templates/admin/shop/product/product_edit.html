{% extends 'admin_base.html' %}



{% block body %}
{% load thumbnail %}
<div class="page__title">Редактировать товар</div>

<div class="breadcrumb">
    <div class="breadcrumb__inner">

        <ol class="breadcrumb__list">
            <li class="breadcrumb__item"><a class="breadcrumb__link" href="{% url 'admin' %}">Главная</a></li>
            <li class="breadcrumb__item"><a class="breadcrumb__link" href="{% url 'admin_product' %}">Товары</a></li>

            <li class="breadcrumb__item">Редактировать товар</li>
          
        </ol>


        
    </div>
</div>




<form action="" class="form" method="post" enctype="multipart/form-data" id="addCat">
    {% csrf_token %}
    
    <div class="form__title">Редактировать товар 
        <div>
            <a href="" id="save" class="save-product">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM272 80v80H144V80h128zm122 352H54a6 6 0 0 1-6-6V86a6 6 0 0 1 6-6h42v104c0 13.255 10.745 24 24 24h176c13.255 0 24-10.745 24-24V83.882l78.243 78.243a6 6 0 0 1 1.757 4.243V426a6 6 0 0 1-6 6zM224 232c-48.523 0-88 39.477-88 88s39.477 88 88 88 88-39.477 88-88-39.477-88-88-88zm0 128c-22.056 0-40-17.944-40-40s17.944-40 40-40 40 17.944 40 40-17.944 40-40 40z"/></svg>
            </a>
            <a href="{% url 'admin_product' %}">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512"><path d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"/></svg>
            </a>
        </div>
    </div>

    <div class="product-tabs">
        <input type="radio" name="tab-btn" id="product-tab-btn-1" value="" checked>
        <label for="product-tab-btn-1">Основное</label>
        <input type="radio" name="tab-btn" id="product-tab-btn-2" value="">
        <label for="product-tab-btn-2">Данные</label>
        <input type="radio" name="tab-btn" id="product-tab-btn-3" value="">
        <label for="product-tab-btn-3">Связи</label>
        <input type="radio" name="tab-btn" id="product-tab-btn-4" value="">
        <label for="product-tab-btn-4">Опции</label>
        <input type="radio" name="tab-btn" id="product-tab-btn-5" value="">
        <label for="product-tab-btn-5">Характеристики</label>
        {% comment %} <input type="radio" name="tab-btn" id="product-tab-btn-6" value="">
        <label for="product-tab-btn-6">SEO</label> {% endcomment %}
        <input type="radio" name="tab-btn" id="product-tab-btn-7" value="">
        <label for="product-tab-btn-7">Изображения</label>


        <div id="product-content-1">

            
            <p>
                <span class="required">*</span> {{ form.name.label_tag }} 
                {{ form.name }}
                {{ form.name.errors }}
            </p>
            <p>
                {{ form.short_description.label_tag }}
                {{ form.short_description }}
                {{ form.short_description.errors }}
            </p>
            <p>
                <span class="required">*</span> {{ form.description.label_tag }}
                {{ form.description }}
                {{ form.description.errors }}
            </p>
            <p>
                {{ form.meta_h1.label_tag }}
                {{ form.meta_h1 }}
                {{ form.meta_h1.errors }}
            </p>
            <p>
                {{ form.meta_title.label_tag }}
                {{ form.meta_title }}
                {{ form.meta_title.errors }}
            </p>
            <p>
                {{ form.meta_description.label_tag }}
                {{ form.meta_description }}
                {{ form.meta_description.errors }}
            </p>
            <p>
                {{ form.meta_keywords.label_tag }}
                {{ form.meta_keywords }}
                {{ form.meta_keywords.errors }}
            </p>
            <p>
                {{ form.tags.label_tag }}
                {{ form.tags }}
                {{ form.tags.errors }}
            </p>
            <p>
                <span class="required">*</span> {{ form.slug.label_tag }}
                {{ form.slug }}
                {{ form.slug.errors }}
            </p>
            {{ form.media }}
        </div>
        <div id="product-content-2">
           
            <p>
                <span class="required">*</span> {{ form.sku.label_tag }}
                {{ form.sku }}
                {{ form.sku.errors }}
            </p>
            <p>
                <span class="required">*</span> {{ form.price.label_tag }}
                {{ form.price }}
                {{ form.price.errors }}
            </p>
            <p>
                {{ form.old_price.label_tag }}
                {{ form.old_price }}
                {{ form.old_price.errors }}
            </p>
            <p>
                <span class="required">*</span> {{ form.stock.label_tag }}
                {{ form.stock }}
                {{ form.stock.errors }}
            </p>
            <p>
                {{ form.minimum.label_tag }}
                {{ form.minimum }}
                {{ form.minimum.errors }}
            </p>
            <p>
                {{ form.subtract.label_tag }}
                {{ form.subtract }}
                {{ form.subtract.errors }}
            </p>
            <p>
                {{ form.shipping.label_tag }}
                {{ form.shipping }}
                {{ form.shipping.errors }}
            </p>
            <p>
                {{ form.top_collection.label_tag }}
                {{ form.top_collection }}
                {{ form.top_collection.errors }}
            </p>
            <p>
                {{ form.new.label_tag }}
                {{ form.new }}
                {{ form.new.errors }}
            </p>
           
            <div class="form__row">
                <p>
                    {{ form.length.label_tag }}
                    {{ form.length }}
                    {{ form.length.errors }}
                </p>
                <p>
                    {{ form.width.label_tag }}
                    {{ form.width }}
                    {{ form.width.errors }}
                </p>
                <p>
                    {{ form.height.label_tag }}
                    {{ form.height }}
                    {{ form.height.errors }}
                </p>
            </div>
            <p>
                {{ form.length_class.label_tag }}
                {{ form.length_class }}
                {{ form.length_class.errors }}
            </p>
            <p>
                {{ form.weight.label_tag }}
                {{ form.weight }}
                {{ form.weight.errors }}
            </p>
            <p>
                {{ form.weight_class.label_tag }}
                {{ form.weight_class }}
                {{ form.weight_class.errors }}
            </p>
            <p>
                {{ form.status.label_tag }}
                {{ form.status }}
                {{ form.status.errors }}
            </p>
            <p>
                {{ form.sort_order.label_tag }}
                {{ form.sort_order }}
                {{ form.sort_order.errors }}
            </p>

        </div>
        <div id="product-content-3">
            <p>
                <span class="required">*</span> {{ form.parent.label_tag }}
                {{ form.parent }}
                {{ form.parent.errors }}
            </p>
            {% comment %} <p>
                <span class="required">*</span> {{ form.product_connect.label_tag }}
                {{ form.product_connect }}
                {{ form.product_connect.errors }}
            </p> {% endcomment %}
            <p>
                {{ form.product_manufacturer.label_tag }}
                {{ form.product_manufacturer }}
                {{ form.product_manufacturer.errors }}
            </p>
        </div>
        <div id="product-content-4">
            <div class="product-content__inner-4">
                <div class="option">
                    {% for option in options %}
                        {% if forloop.counter > 1 %}
                        <div class="option__old-row">
                            <input name="old_id" type="text" hidden value="{{ option.id }}">
                            <input name="old_count" type="text" class="old_count" value="{{ forloop.counter0 }}" hidden>
                            <p>
                                <label for="id_type">Тип опции:</label>
                                <select name="old_type" class="input" placeholder="Тип опции" id="">
                                    <option value="{{ option.type.id }}">{{ option.type.name }}</option>

                                    {% for op in all_options %}
                                        <option value="{{ op.id }}">{{ op.name }}</option>
                                    {% endfor %}
                                </select>
                            </p>
                            <p>
                                <label for="id_value">Артикул:</label>
                                <input type="text" name="old_option_sku" class="input" placeholder="Значение" maxlength="250" required="required" id="id_option_sku" value="{% if option.option_sku %}{{ option.option_sku }}{% endif %}">
                            </p>
                            <p>
                                <label for="id_value">Значение:</label>
                                <input type="text" name="old_option_value" class="input" placeholder="Значение" maxlength="250" required="required" id="id_value" value="{{ option.option_value }}">
                            </p>
                            <p>
                                <label for="id_stock">Количество:</label>
                                <input type="number" name="old_option_stock" class="input" placeholder="Количество" min="0" required="required" id="id_stock" value="{{ option.option_stock }}">
                            </p>
                            <p>
                                <label for="id_price">Добавить стоимость:</label>
                                <input type="text" name="old_option_price" class="input input-price" placeholder="Добавить стоимость" required="required" step="0.10" id="id_price" value="{{ option.option_price | floatformat:2  }}"> 
                            </p>
                            <p>
                                <label for="id_subtract">Вычитать со склада:</label>
                                
                                <input type="checkbox" class="id_subtract_get" {% if option.option_subtract == True %}checked{% endif %}>
                                <input type="text" name="old_option_subtract" class="id_subtract_paste" value="{{ option.option_subtract }}">
                            </p>
                            <p>

                                <label for="id_image_status">Включить изображения:</label>
                                <input type="checkbox" class="id_image_old" {% if option.image_status == True %}checked{% endif %}>
                                <input type="text" name="old_image_status" class="id_image_paste" value="{{ option.image_status }}">

                            </p>
                            <a href="{% url 'option_delete' option.id %}" class="option__remove">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"/></svg>
                            </a>
                        </div>
                        

                        <div class="option__images">
                            {% for image in option.images.all %}
                                <div class="option__images-wrap">
                                    <a href="{% url 'option_image_delete' image.id %}" class="option__images-remove">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z"></path></svg>
                                    </a>
                                    {% thumbnail image.src "150x150" crop="center" as im %}
                                        <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}" alt="" class="option__image">
                                    {% endthumbnail %}
                                </div>
                            {% endfor %}

                            {% if option.images.count > 0 %}
                            <div class="image_paste-{{ forloop.counter0 }}">

                            </div>
                            <div class="image_add">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>

                            </div>
                            {% endif %}
                        </div>
                        {% endif %}
                    {% endfor %}
                </div>
                <div class="option__paste">

                    
                </div>
                <div class="option__wrap">
                    <div class="option__add">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
                    </div>
                </div>
            </div>
        </div>
        <div id="product-content-5">
            <div class="product-content__inner-5">
                <div class="char">


                    {% for char in chars %}
                    <div class="char__row">
                        <input type="text" name="old_char_id" value="{{ char.id }}" hidden>
                        <p><label for="id_name">Название характеристики:</label>
                            <select name="old_text_name" class="input" placeholder="Название характеристики" id="id_name">
                                <option value="{{ char.char_name.id }}">{{ char.char_name.text_name }}</option>
                                {% for ch in all_chars %}
                                    <option value="{{ ch.id }}">{{ ch.text_name }}</option>
                                {% endfor %}
                            </select>
                        </p>
                        <p>
                            <label for="id_char_value">Значение:</label>
                            <input type="text" name="old_char_value" class="input" placeholder="Значение" required="" id="id_char_value" value="{{ char.char_value }}">
                        </p>
                        <a href="{% url 'product_char_delete' char.id %}" class="char__remove">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
                        </a>
                    </div>
                    {% endfor %}


                </div>
                <div class="char__paste">

                </div>
                

                <div class="product-block__wrapper">
                    <div class="char__plus">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
                    </div>
                </div>
            </div>
        </div>

        
        {% comment %} <div id="product-content-6">
           

        </div> {% endcomment %}
        <div id="product-content-7">
            <div class="product-content__inner-7">
                <p>
                    <span class="required">*</span> {{ form.thumb.label_tag }} <br>
                    {{ form.thumb }}
                    {{ form.thumb.errors }}
                </p>
                <p class="form__title">Дополнительные изображения</p>

                <div class="product-block__old-images">
                    
                    {% for image in product.images.all %}
                        <div class="product-block__old-item">

                            <a href="{% url 'product_image_delete' image.id %}" class="product-block__old-remove">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z"></path></svg>
                            </a>

                            {% thumbnail image.src "150x150" crop="center" as im %}
                                <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}" alt="" class="product-block__old-image">
                            {% endthumbnail %}
                        </div>
                    {% endfor %}

                </div>
                

                <div class="product-block__paste">

                </div>

                <div class="product-block__wrapper">
                    <div class="product-block__plus">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>
                    </div>
                </div>

                <div class="product-block">
                    <div class="product-block__inner">
                        <p>
                            {{ image_form.src.label_tag }}
                            {{ image_form.src }}
                            {{ image_form.src.errors }}
                        </p>

                        <div class="product-block__minus">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"/></svg>
                        </div>
                    </div>
                </div>
            </div>

        </div>
     
    </div>
</form>

<div class="select-hide">
{{ option_form.type }}
{{ product_char_form.char_name }}
</div>




{% endblock %}